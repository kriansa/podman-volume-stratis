[Unit]
Description=Podman/Docker Volume Plugin for Stratis Filesystems (Test)
Documentation=https://github.com/kriansa/podman-volume-stratis
After=stratisd.service
Requires=stratisd.service

[Service]
Type=simple
ExecStartPre=/bin/mkdir -p /run/podman/plugins
ExecStartPre=/bin/mkdir -p /mnt/volumes
ExecStart=/usr/local/bin/podman-volume-stratis --pool test_pool --mount-path /mnt/volumes --socket /run/podman/plugins/volume-stratis.sock
Restart=on-failure
RestartSec=5s

# Logging
StandardOutput=journal
StandardError=journal

# Memory protections
MemoryDenyWriteExecute=yes

# Disable SUID/SGID bits
RestrictSUIDSGID=yes

[Install]
WantedBy=multi-user.target
